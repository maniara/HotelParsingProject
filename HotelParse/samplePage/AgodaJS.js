var prevTravellerGroupId,prevVal=new Array;!function(e){"use strict";function n(e,n){n?e.parent().removeClass("selected"):e.parent().addClass("selected"),e.toggle()}function a(e){var n=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return n.test(e)}function t(e){var n=/^[a-z\-\.\u00aa\u00ba\u00c0-\u00ff\u0100-\u017F\u0180-\u024F\u0292\u0300-\u036f\u1D00-\u1D6A\u1E00-\u1EFF\ua720-\ua7ff\'\â€™\`\s]+$/i;return n.test(e)}var i=ExperimentManager.isB("MIN-5907");agoda.currencyView=function(a,t,r,o,l){function s(){Q&&(l&&(M.show().removeClass("hide"),W.show().removeClass("hide"),D.show().removeClass("hide")),i?(n(P,z),z=!z):(z?P.parent().delay(270).queue(function(){e(this).removeClass("selected"),e(this).dequeue()}):P.parent().addClass("selected"),P.slideToggle(O,function(){z=!z,z?e.each(K,function(e,n){n()}):e.each(J,function(e,n){n()})})))}function c(){T=e(j.buttonSelector,N);var n=e.trim(T.attr("data-id")),a=e.trim(T.text()),t=e.trim(T.attr("data-text"));q={id:n,code:a,text:t},V=T.parent(),V.click(s)}function u(){M=e(j.suggestedCurrecnyListSelector,N),W=e(j.topCurrencyListSelector,N),D=e(j.allCurrencyListSelector,N),P=e(j.currencyListSelector,N)}function d(){var n=Handlebars.compile(e.getMustache(A,N)),a=n();V.append(a),u(),P.hide()}function g(){e(document).mouseup(function(e){P.is(e.target)||0!==P.has(e.target).length||T.is(e.target)||I()})}function f(e){return jQuery.grep(Y,function(e,n){return e.ID==_})[0]}function p(e){return jQuery.grep(Y,function(n,a){return n.Code==e})[0]}function m(n){n.find("ul").on("click","li",function(){e(this).find("span").text();if(_=e(this).attr("data-id"),l){var n=e(this).data("code");T.text(n)}else q=f(_),T.text(q.Code);D.find("li.selected").removeClass("selected"),"all-currencies"===e(this).closest("div").attr("id")?e(this).addClass("selected"):D.find("li[data-id="+q.ID+"]",N).addClass("selected"),e.each($,function(e,n){n(q)})})}function h(e){var n=p(e);k(n),T.text(n.Code),D.find("li.selected").removeClass("selected"),D.find("li[data-id="+n.ID+"]").addClass("selected")}function v(e,n){e.append(n),e.parent().show(),e.parent().removeClass("hide"),Q=!0}function L(n){G.push(n);var a=Handlebars.compile(e.getMustache(H,N))({Currencies:[n]});v(M.find("ul",N),a)}function C(n){Z.push(n);var a=Handlebars.compile(e.getMustache(H,N))({Currencies:[n]});v(W.find("ul",N),a)}function b(n){Y.push(n);var a=Handlebars.compile(e.getMustache(H,N))({Currencies:[n]});v(D.find("ul",N),a),D.find("li[data-id="+q.ID+"]",N).addClass("selected")}function S(){z||s()}function I(){z&&s()}function w(){return q}function k(e){var n=j.buttonSelector;n.text=e.Code,n.attr("data-id",e.ID),n.attr("data-text",e.Text),n.attr("title",e.Code)}function B(e){for(var n=0;n<Y.length;n++)if(Y[n].Code==e)return q=Y[n],k(q),void(j.currencyService&&j.currencyService.updateSelectedCurrency(q.ID,!1))}function y(){return z}function x(e){$.push(e)}function U(e){J.push(e)}function E(e){K.push(e)}function F(){N=e(r?r:document),c(),d(),m(D),m(M),m(W),g()}var T,V,M,W,D,P,j={buttonSelector:a,currencyListSelector:t,suggestedCurrecnyListSelector:"#suggested-currency",topCurrencyListSelector:"#top-currencies",allCurrencyListSelector:"#all-currencies",currencyService:o},O=250,A="currencies-template",H="currency-item-template",N="",q=null,_="",z=!1,Q=l?!0:!1,G=[],Z=[],Y=[],$=[],J=[],K=[];return T=e(j.buttonSelector,N),T.bind("updateCurrencyCode",function(){B(T.text())}),F(),{getSelectedCurrency:w,setSelectedCurrencyByCode:B,isVisible:y,open:S,close:I,addSuggestedCurrency:L,addTopCurrency:C,addAllCurrency:b,updateCurrencyView:h,onCurrencyChanged:x,onPanelClosed:U,onPanelOpened:E}},agoda.currencyOptionsView=function(e){function n(){return i}function a(e){i!=e&&(i=e,r.val(e),r.trigger("change"))}function t(e){o.push(e)}var i,r=e,o=[];return{getSelectedCurrencyCode:n,setSelectedCurrencyCode:a,addChangedCallBackFunc:t}},agoda.languageView=function(a,t,r,o){function l(){j=!0,j&&(o&&(x.show().removeClass("hide"),U.show().removeClass("hide")),i?(n(E,P),P=!P):(P?E.parent().delay(270).queue(function(){e(this).removeClass("selected"),e(this).dequeue()}):(E.parent().addClass("selected"),e("div#languages-panel").attr("class","languages"),e("div#languages-panel #suggested-language #all-languages").show()),E.slideToggle(T,function(){P=!P,P?(e.each(q,function(e,n){n()}),E.removeClass("hide")):(e.each(N,function(e,n){n()}),E.addClass("hide"))})))}function s(){B=e(F.buttonSelector,W);var n=B.children().data("language")||B.children().attr("data");D=e.trim(n),y=B.parent(),y.click(l)}function c(){x=e(F.suggestedLanguageListSelector,W),U=e(F.allLanguageListSelector,W),E=e(F.languageListSelector,W)}function u(){var n=e.getMustache(V,W),a=Handlebars.compile(n)();y.append(a),c(),E.hide()}function d(){e(document).mouseup(function(n){i?0===e(n.target).closest("#language").length&&L():E.is(n.target)||0!==E.has(n.target).length||B.is(n.target)||L()})}function g(n){O.push(n);var a=Handlebars.compile(e.getMustache(M,W))({Language:[n]});p(x.find("ul",W),a)}function f(n){A.push(n);var a=Handlebars.compile(e.getMustache(M,W))({Language:[n]});p(U.find("ul",W),a),U.find("i[data="+D+"]",W).parent().parent().addClass("selected")}function p(e,n){e.append(n),e.parent().show(),e.parent().removeClass("hide"),j=!0}function m(e){U.find("i[data= "+e+"]").parent().parent().addClass("selected")}function h(n){n.find("ul").on("click","li",function(){D=e(this).find("i").attr("data"),B.children().attr("data",D),B.children().removeClass(B.children().attr("class")).addClass(e(this).find("i").attr("class")),U.find("li.selected").removeClass("selected"),"all-languages"===e(this).closest("div").attr("id")?e(this).addClass("selected"):U.find("i[data="+D+"]",W).parent().parent().addClass("selected"),e.each(H,function(e,n){n(C())})})}function v(){P||l()}function L(){P&&l()}function C(){var e=jQuery.grep(A,function(e,n){return e.LanguageId==D})[0];return e}function b(){return P}function S(e){H.push(e)}function I(e){N.push(e)}function w(e){q.push(e)}function k(){W=e(r?r:document),s(),u(),h(U),h(x),d()}var B,y,x,U,E,F={buttonSelector:a,languageListSelector:t,suggestedLanguageListSelector:"#suggested-language",allLanguageListSelector:"#all-languages"},T=250,V="languages-template",M="language-item-template",W="",D="",P=!1,j=o?!0:!1,O=[],A=[],H=[],N=[],q=[];return k(),{getSelectedLanguage:C,isVisible:b,open:v,close:L,addSuggestedLanguage:g,addAllLanguage:f,onLanguageChanged:S,onPanelClosed:I,onPanelOpened:w,addSelectedLanguage:m}},agoda.signInSignUpPanel=function(){function n(n,i,o){s=e(n),c=e(i),a(o),r(),t(d)}function a(e){s.click(e,i)}function t(n){e("body").on("click",n,function(){e.ajax({url:"/api/main/logout",type:"POST",dataType:"jsonp",cache:!1,success:function(e){window.location.reload()},error:function(e){}})})}function i(e){u?l():o(),e.data&&(location.hash=""),location.hash="header-mainmenu"}function r(){e(document).mouseup(function(e){c.is(e.target)||0!==c.has(e.target).length||s.is(e.target)||0!==s.has(e.target).length||l()})}function o(){s.parent().addClass("selected"),c.show(),c.focus(),u=!0}function l(){s.parent().removeClass("selected"),c.hide(),u=!1}var s,c,u=!1,d="#link-signout";return{init:n}}(),agoda.signInSignUpPanel.tabs=function(){function n(n,t){var i=[],r=e(t);e.each(n,function(n,t){var o=e(t);i.push(o),o.click(function(){a(o,i,r)})})}function a(n,a,t){e.each(a,function(e,n){n.removeClass("active")}),n.addClass("active"),t.children().hide();var i=n.attr("data-value");e("#"+i).show()}return{init:n}}(),agoda.signInSignUpPanel.signInForm=function(){function n(n,i){function r(e){e.emailLabel.removeClass("sign-in-error"),e.passwordLabel.removeClass("sign-in-error"),e.emailBlankLabel.hide(),e.emailIncorrectLabel.hide(),e.passwordBlankLabel.hide(),e.emailWrongFormat.hide()}function o(e,n,a){var t=l(e,a);return n&&0!=n.length||(a.passwordBlankLabel.show(),t=!1),t}function l(e,n){var t=!0;return n.emailLabel.removeClass("sign-in-error"),n.emailBlankLabel.hide(),n.emailWrongFormat.hide(),e&&0!=e.length?a(e)||(n.emailWrongFormat.show(),t=!1):(n.emailBlankLabel.show(),t=!1),t}function s(n,a,t,i){i.signInButton.addClass("sign-in-loading-icon"),u(e("#sign-in-email").val(),e("#sign-in-password").val(),e("#sign-in-keep-log-in").is(":checked"),e("input[name='requestVerificationToken']").val(),function(){d(i)})}function c(e,n,a,t){return e+":"+n+":"+a+":"+t}function u(n,a,t,i,r){var o="https://"+window.location.host+"/api/main/login",l=c(n,a,t,i);return e.ajax({url:,xhrFields:{withCredentials:!0},data:{"":l},type:"POST",dataType:"json",cache:!1,success:function(e){e.Success?window.location.reload():void 0!==r&&r()},error:function(e){}}),!1}function d(e){e.emailIncorrectLabel.show(),e.signInButton.removeClass("sign-in-loading-icon")}var g={keepMeLogin:e(n.keepMeLoginSectionSelector),checkboxButton:e(n.checkboxButtonSelector),signInButton:e(n.signInButtonSelector),emailInput:e(n.emailInputSelector),passwordInput:e(n.passwordInputSelector)},f={emailLabel:e(i.emailLabelSelector),passwordLabel:e(i.passwordLabelSelector),emailIncorrectLabel:e(i.emailIncorrectLabelSelector),emailWrongFormat:e(i.emailWrongFormatLabelSelector),passwordBlankLabel:e(i.passwordBlankLabelSelector),emailBlankLabel:e(i.emailBlankLabelSelector),signInButton:e(n.signInButtonSelector)};g.keepMeLogin.click(function(){t(g.checkboxButton)}),g.emailInput.focusout(function(){var e=g.emailInput.val();l(e,f)}),g.signInButton.click(function(){var e=g.emailInput.val(),n=g.passwordInput.val(),a=g.checkboxButton.val();r(f),o(e,n,f)&&s(e,n,a,f)})}function t(e){e.prop("checked",!e.prop("checked"))}return{init:n}}(),agoda.signInSignUpPanel.signUpForm=function(){function n(n,r){function o(){var e=I.firstnameInput.val().trim(),n=I.lastnameInput.val().trim(),a=I.emailInput.val(),t=I.passwordInput.val(),i=I.emailExistingValidationUrl,r=(I.checkboxButton.val(),I.tokenInput.val());c(w),g(e,n,a,i,t,r,w)&&d(e,n,a,t,!1,r,function(){l(w)},function(){s(w)})}function l(n){n.passwordLabel.addClass("sign-in-error"),e("html, body").animate({scrollTop:n.passwordLabel.offset().top-175},500)}function s(e){e.technicalDifficultiesIssue.show()}function c(e){e.firstnameLabel.removeClass("sign-in-error"),e.lastnameLabel.removeClass("sign-in-error"),e.emailLabel.removeClass("sign-in-error"),e.passwordLabel.removeClass("sign-in-error"),e.firstnameBlankLabel.hide(),e.lastnameBlankLabel.hide(),e.emailBlankLabel.hide(),e.passwordBlankLabel.hide(),e.emailWrongFormat.hide(),e.technicalDifficultiesIssue.hide()}function u(e,n,a,t,i,r){return e+":"+n+":"+a+":"+t+":"+i+":"+r}function d(n,a,t,i,r,o,l,s){var c="https://"+window.location.host+"/api/main/signup",d=u(n,a,t,i,r,o);w.signUpButton.addClass("sign-in-loading-icon"),e.ajax({url:c,xhrFields:{withCredentials:!0},data:{"":d},type:"POST",dataType:"json",cache:!1,success:function(e){e.Success?window.location.reload():void 0!==l&&l(),w.signUpButton.removeClass("sign-in-loading-icon")},error:function(e){void 0!==s&&s(),w.signUpButton.removeClass("sign-in-loading-icon")}})}function g(e,n,a,t,i,r,o){var l=v(e,o),s=L(n,o),c=f(a,t,r,o),u=h(i,o);return l&&s&&c&&u}function f(e,n,t,i){var r=!0;return i.emailLabel.removeClass("sign-in-error"),i.emailBlankLabel.hide(),i.emailWrongFormat.hide(),i.emailAlreadyExistLabel.hide(),e&&0!=e.length?a(e)?m(e,n,t,i,function(e){e?i.emailExistWarningIcon.hide():(i.emailAlreadyExistLabel.show(),i.emailExistWarningIcon.show(),r=!1)}):(i.emailWrongFormat.show(),r=!1):(i.emailBlankLabel.show(),r=!1),r}function p(e,n){return e+":"+n}function m(n,a,t,i,r){var o=p(n,t);i.emailVerificationLoadingIcon.show(),e.ajax({url:a,data:{"":o},type:"POST",dataType:"jsonp",cache:!1,success:function(e){r(e.Success),i.emailVerificationLoadingIcon.hide()},error:function(e){i.emailVerificationLoadingIcon.hide()}})}function h(e,n){var a=!0;return e&&e.length<8&&(n.passwordLabel.addClass("sign-in-error"),a=!1),a}function v(e,n){var a=!0;return 0==e.length&&(n.firstnameBlankLabel.show(),a=!1),a}function L(e,n){var a=!0;return 0==e.length&&(n.lastnameBlankLabel.show(),a=!1),a}function C(e){var n=String.fromCharCode(e.which);return t(n)?!0:(alert(agoda.cms.getCmsText(INPUT_ENGLISH_ONLY)),e.preventDefault(),!1)}function b(e){var n=String.fromCharCode(e.which);return t(n)?!0:(alert(agoda.cms.getCmsText(INPUT_ENGLISH_ONLY)),e.preventDefault(),!1)}function S(e){e.prop("checked",!e.prop("checked"))}var I={sendMeSpecialOffer:e(n.sendMeSpecialOfferSelector),checkboxButton:e(n.checkboxButtonSelector),signUpButton:e(n.signUpButtonSelector),firstnameInput:e(n.firstnameInputSelector),lastnameInput:e(n.lastnameInputSelector),emailInput:e(n.emailInputSelector),passwordInput:e(n.passwordInputSelector),emailExistingValidationUrl:n.emailExistingValidationUrl,tokenInput:e(n.tokenInputSelector)},w={firstnameLabel:e(r.firstnameLabelSelector),lastnameLabel:e(r.lastnameLabelSelector),emailLabel:e(r.emailLabelSelector),passwordLabel:e(r.passwordLabelSelector),emailWrongFormat:e(r.emailWrongFormatLabelSelector),passwordBlankLabel:e(r.passwordBlankLabelSelector),firstnameBlankLabel:e(r.firstnameBlankLabel),lastnameBlankLabel:e(r.lastnameBlankLabel),emailBlankLabel:e(r.emailBlankLabelSelector),signUpButton:e(n.signUpButtonSelector),emailAlreadyExistLabel:e(r.emailAlreadyExistLabelSelector),technicalDifficultiesIssue:e(r.technicalDifficultiesIssueSelector),emailVerificationLoadingIcon:e(r.emailVerificationLoadingIconSelector),emailExistWarningIcon:e(r.emailExistWarningIconSelector)};I.sendMeSpecialOffer.click(function(){S(I.checkboxButton)}),I.emailInput.focusout(function(){var e=I.emailInput.val(),n=I.tokenInput.val();f(e,I.emailExistingValidationUrl,n,w)}),w.emailExistWarningIcon.click(function(){var e=I.emailInput.val(),n=I.tokenInput.val();f(e,I.emailExistingValidationUrl,n,w)}),I.signUpButton.click(o),I.firstnameInput.prop("maxLength",i),I.lastnameInput.prop("maxLength",i),I.passwordInput.prop("maxLength",i),I.emailInput.prop("maxLength",i),I.firstnameInput.keypress(C),I.lastnameInput.keypress(b)}var i=64;return{init:n}}()}(window.jQuery);